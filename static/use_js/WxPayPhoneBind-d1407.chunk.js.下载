webpackJsonp([18],{2533:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return function(a){new c.default(a).post("/sms",{phoneNumber:e,type:t,eContractId:n||"",userRegType:p.default.userType},function(){a(u(t))})}}function r(e,t,n,a){return function(o){new c.default(o).post("/user/sms",{phoneNumber:e,checkCode:t,type:n,userRegType:a},function(){o(u(n))},function(e){y.toastr.error(e.message),o((0,m.getGraphicCode)())})}}function u(e){if(!(h[e]>0))return h[e]=60,function(t){!function n(){t({type:i.default.DEC_SMS_VERIFY_CODE_REMAIN_TIME,remainTime:h}),--h[e]>=0&&setTimeout(n,1e3)}()}}Object.defineProperty(t,"__esModule",{value:!0}),t.verifySmsCode=o,t.verifySmsImgCode=r;var l=n(861),i=a(l),s=n(862),c=a(s),f=n(870),d=(a(f),n(865)),p=a(d),m=n(860),y=n(709),h={}},2534:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a,o,r=(o=a=function e(){n(this,e)},a.Pay_URLATTESTATION="URLATTESTATION_PAY",a.Pay_MONITOR="MONITOR_PAY",a.PURCHASE="PURCHASE_PAY",a.Pay_ECONTRACT="ECONTRACT_PAY",a.Pay_NOTARY="NOTARY_PAY",a.Pay_ATTESTATION=" ATTESTATION_PAY",a.Register="REGISTER",a.Pwd="FORGOT_PASSWORD",a.EContract="ECONTRACT_SIGN",a.Authentic="AUTHENTIC",a.Login="LOGIN",a.BIND_PHONE="BIND_PHONE",a.getTypes=function(){return["Pay_URLATTESTATION","Pay_ECONTRACT","Pay_NOTARY","Register","pwd","EContract","Authentic","LOGIN","BIND_PHONE","ActiveLogin"].map(function(e){return{name:e,value:r[e]}})},o);t.default=r},2536:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){r.default.clean(),r.default.uid=t.id,r.default.token=t.token,r.default.userType=t.type,"TEAM_MAIN"===t.mainSonType&&t.hasSon===!1?r.default.userIdentity="NORMAL":"TEAM_MAIN"===t.mainSonType?r.default.userIdentity="TEAM_MAIN":"BOTH_MAIN"===t.mainSonType?r.default.userIdentity="BOTH_MAIN":"TEAM_SON"===t.mainSonType?r.default.userIdentity="TEAM_SON":"CLIENT_SON"===t.mainSonType&&(r.default.userIdentity="CLIENT_SON"),e({type:s.default.SIGN_IN,info:t}),e((0,l.default)(n))};var o=n(865),r=a(o),u=n(867),l=a(u),i=n(861),s=a(i)},2541:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,i,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f=n(419),d=a(f),p=n(1085),m=a(p),y=n(1083),h=a(y),T=n(1038),_=n(728),E=a(_),N=n(708),O=a(N),A=n(1458),v=a(A),b=n(2534),I=a(b),P=n(2533),M=n(869),S=n(2536),C=a(S),R=n(2233),g=a(R),w=function(e){return new h.default(e).verifyCode("code",O.default.translate("common.verify-code")).phoneNumber("phone",O.default.translate("user.correct-phone")).errors},j=["phone","code"],L=void 0,Y=(l=(0,T.reduxForm)({form:"aliPay-login",fields:j,validate:w},function(e){return c({},e.sms,{pathname:e.router.location.pathname,location:e.router.location,sysInfo:e.user.sysInfo,authCode:e.router.location.query.auth_code,onSubmit:function(e,t){t((0,M.weChatAuthPhone)({phone:e.phone,code:e.code},function(e){e.status===!0?L.setModal(!0):((0,C.default)(t,e,"/user-statistic"),L.setModal(!1))}))}})}))(i=function(e){function t(){var e,n,a,u;o(this,t);for(var l=arguments.length,i=Array(l),s=0;s<l;s++)i[s]=arguments[s];return n=a=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={checkP:"",per:a.props.params.per,showBindModal:!1},a.componentWillMount=function(){L=a},a.setModal=function(e){a.setState({showBindModal:e})},a.submit=function(){var e=a.props.fields,t=e.phone,n=e.code;a.props.dispatch((0,M.isWxBindPhone)({phone:t.value,code:n.value},function(e){(0,C.default)(a.props.dispatch,e,"/user-statistic"),a.setModal(!1)}))},u=n,r(a,u)}return u(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.fields,o=a.phone,r=a.code,u=t.handleSubmit,l=t.remainTime,i=t.dispatch,s=I.default.Login;return d.default.createElement("div",{className:"sign-up-page"},d.default.createElement("header",null,d.default.createElement("div",{className:"content"},d.default.createElement(E.default,{to:"/"},d.default.createElement("img",{style:{width:100},src:n(2123)})))),d.default.createElement("form",{className:"registry-form",onSubmit:u},d.default.createElement("h1",null,"绑定手机号"),d.default.createElement("section",null,d.default.createElement(v.default,c({placeholder:O.default.translate("user.phone-tip"),type:"text"},m.default.extract(o),{file:o,width:"340",height:"44"})),d.default.createElement("span",{className:"name"},O.default.translate("common.phone-number"))),d.default.createElement("section",null,d.default.createElement("div",{className:"verify"},d.default.createElement("span",{className:"name"},O.default.translate("user.verify-code")),d.default.createElement("button",{type:"button",className:"code",disabled:l[s]||!o.value?"disabled":"",onClick:function(e){return i((0,P.verifySmsCode)(o.value,s))}},l[s]>0?""+l[s]+O.default.translate("common.reset-sms"):O.default.translate("common.send-sms"))),d.default.createElement(v.default,c({placeholder:O.default.translate("user.enter-verify-code"),type:"text"},m.default.extract(r),{file:r,width:"340",height:"44"}))),d.default.createElement("button",{type:"submit"},"下一步")),this.state.showBindModal?d.default.createElement(g.default,{hideModel:function(){return e.setModal(!1)},confirm:this.submit,title:"绑定手机",tip:"该手机号已绑定其他微信账号，继续操作将与其他微信账号解绑，请确认要继续吗？"}):"")}}]),t}(f.Component))||i;t.default=Y}});